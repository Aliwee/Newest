<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>newest</title>
	<link rel="stylesheet" media="screen" href="css/index.css">
	<link rel="stylesheet" type="text/css" href="font/font.css">
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/jquery.cookie.js"></script>
	<style>
		.review{
			float: left;
			font-size: 13px;
			height: 30px;
			line-height: 30px;
		}
		ul img{
			height: 20px;
			margin: 5px;
			float: left;
		}
		#right-container .review{
			height: 20px;
			font-size: 14px;
			line-height: 20px;
			margin-left: 10px;
		}
	</style>
</head>
<body>
	<div id="index-container">
		<div id="index-head">
			<div id="index-head-inner">
				<img style="height: 50px; float: left;" src="pic/title.png">
				<nav id="index-head-nav">
					<a href="">新闻</a>
					<a href="">新鲜事</a>
				</nav>
				<div class="search-bar">
					<div id="popver">
						<div id="search-bar-container">
							<input id="search-bar-input" type="text" placeholder="搜索你感兴趣的内容">
							<button id="search-bar-button"></button>
						</div>
					</div>
				</div>
				<button id="search-button">搜 索</button>
			</div>
		</div>
		<div style="padding: 0 16px;margin: 65px auto auto auto">
			<div id="new-content">
				<div id="guide">
					<div class="guide-ring" id="tech">科技</div>
					<div class="guide-ring" id="society">社会</div>
					<div class="guide-ring" id="life">生活</div>
					<div class="guide-ring" id="army">军事</div>
				</div>
				<div id="new-container">
					<div id="content-main">
						<ul>
							<li class="list-news">
								<div class="list-news-top">
									<div class="media-head"></div>
									<div class="media-name">Tencent</div>
									<div class="news-classify">
										<div class="review" style="margin-right: 4px;">科技</div>
									</div>
								</div>
								<div class="new-item-content">
									<h3>
										<a>AI产业规模2020年破万亿 自动驾驶等将加快制定法规</a>
									</h3>
									<div class="new-item-content-inner">谁先成为人工智能技术强国，谁就掌握了这轮科技革命的先机。7月20日，国务院印发《新一代人工智能发展规划》（以下简称《规划》），明确到2020年，部分领域的人工智能伦理规范和政策法规初步建立，到2030年建成更加完善的人工智能法律法规、伦理规范和政策体系。需要突破的基础理论包括加强大数据智能、跨媒体感知计算、人机混合智能、群体智能、自主协同与决策等。关键共性技术包括知识计算引擎与知识服务、跨媒体分析推理、群体智能关键技术、混合增强智能新架构与新技术、自主无人系统的智能技术等。</div>
								</div>
								<div class="list-news-action">
									<div class="list-news-action-review">
										<img src="pic/review.png">
										<div class="review">评论</div>
									</div>
									<div class="list-news-action-like">
										<img id="like" src="pic/like.png">
										<div id="like-num" class="review">20</div>
										<div class="review">喜欢</div>
									</div>
									<div class="list-news-action-time">2017年07月21日 06:07:29</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="index-right">
				<div id="right-container">
					<div class="person-head"></div>
					<div class="person-name" id="myName"></div>
					<div class="person-piece">
						<img height="20px" style="float: left;" src="pic/review.png">
						<div class="review" id="myReview">我的评论</div>
					</div>
					<div class="person-piece">
						<img id="myLikePic" height="20px" style="float: left;" src="pic/like.png">
						<div id="myLike" class="review">我的喜欢</div>
					</div>
					<div class="person-piece">
						<img height="20px" style="float: left;" src="pic/setup.png">
						<div class="review" id="mySetting">设置</div>
					</div>
					<button id="log-out">注 销</button>
				</div>
			</div>
		</div>
	</div>
	
	<!--
    	作者：731275785@qq.com
    	时间：2017-07-21
    	描述：全局变量
    -->
    <script>
    	var u1 = "http://121.48.228.194:4567/post";
    	var ajaxobj;
    	var list = 
    	'<li class="list-news">' +
    		'<div class="list-news-top">' +
    			'<div class="media-head"></div>' +
    			'<div class="media-name"></div>' +
	    		'<div class="news-classify">'+
	    			'<div class="review" style="margin-right:4px;"></div>' +
	    		'</div>' +
    		'</div>' +
    		'<div class="new-item-content">' +
    			'<h3><a></a></h3>' +
    			'<div class="new-item-content-inner"></div>' +
    		'</div>' +
    		'<div class="list-news-action">' +
    			'<div class="list-news-action-review">' +
    				'<img src="pic/review.png">' +
    				'<div class="review">评论</div>' +
    			'</div>' +
    			'<div class="list-news-action-like">' +
    				'<img src="pic/like.png">' +
    				'<div class="review"></div>' +
    				'<div class="review">喜欢</div>' +
    			'</div>' +
    			'<div class="list-news-action-time"></div>' +
    		'</div>' +
    	'</li>';
    </script>
    
     <script>
    	function sendPrePost(){
    		$.ajax({
    			type:"get",
    			url:u1,
    			async:true,
    			contentType: "application/x-www-form-urlencoded; charset=utf-8",
 				success:function(data){
 					ajaxobj = JSON.parse(data);
 					if(ajaxobj.isOk == true){
   						appendList(ajaxobj.posts[0].post_id,ajaxobj.posts[0].author_name,
   						ajaxobj.posts[0].author_id,ajaxobj.posts[0].title,
   						ajaxobj.posts[0].content,ajaxobj.posts[0].time,
   						ajaxobj.posts[0].author_pic,ajaxobj.posts[0].liked);
 					}
 				}
    		});
    	}
    </script>
    
    <!--
    	作者：731275785@qq.com
    	时间：2017-07-22
    	描述：验证登录与加载用户数据
    -->
	<script>
		if($.cookie('newestUserId') &&  $.cookie('newestUserName')){
			$("#myName").html($.cookie('newestUserName'));
			sendPrePost();
		}
		else{
			window.location.href = "login-register.html";
		}
	</script>
	
	<!--
    	作者：731275785@qq.com
    	时间：2017-07-22
    	描述：注销
    -->
    <script>
    	function logOut(){
    		$.cookie('newestUserId', null, {
            	expires : -1,
	        });
	        $.cookie('newestUserPassword', null, {
	            expires : -1,
	        });
	        $.cookie('newestUserName',null, {
	            expires : -1,
	        });
	        $("#myName").val("Newest");
    	}
    	$("#log-out").click(function(){
    		logOut();
    		window.location.reload();
    	})
    </script>
	
	<!--
    	作者：731275785@qq.com
    	时间：2017-07-21
    	描述：动态添加
    -->
    <script>
    	function appendList(postId,authorName,authorId,title,content,time,author_pic,liked){
    		$("ul").append(list);
    		
    		$("ul li:last-child").data("postId",postId);
    		$("ul li:last-child").children(".list-news-top").children(".media-head").css("background-image","url("+author_pic+")");
    		$("ul li:last-child").children(".list-news-top").children(".media-name").html(title);
    		
    	}
    </script>
    
    <!--
    	作者：731275785@qq.com
    	时间：2017-07-21
    	描述：喜欢的切换,on方法一定在append之后!!!
    -->
	<script>
		$("img").on("click", function(){
			if($(this).attr("src") == "pic/like.png" && $(this).attr("id") == null){
				$(this).attr("src","pic/like-click.png");
			}
			else if($(this).attr("src") == "pic/like-click.png" && $(this).attr("id") == null){
				$(this).attr("src","pic/like.png");
			}
			else{
				//do nothing
			}
		});
	</script>
</body>
</html>